<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
    <script src="https://unpkg.com/mustache@latest"></script>
    <script src="https://unpkg.com/htmx.org@1.9.12/dist/ext/path-params.js"></script>
    <script src="https://unpkg.com/htmx.org@1.9.12/dist/ext/client-side-templates.js"></script>
  </head>
  <body>
    <form
      hx-ext="path-params,client-side-templates"
      mustache-template="pokemon-template"
      hx-get="https://pokeapi.co/api/v2/pokemon/{id}"
      hx-target="#result"
      hx-swap="innerHTML"
    >
      <input
        name="id"
        type="number"
        min="1"
        required
        placeholder="ポケモンID"
      />
      <button type="submit">取得</button>
    </form>

    <section id="result"></section>

    <template id="pokemon-template">
      <table border="1" cellpadding="6" cellspacing="0">
        <thead>
          <tr>
            <th colspan="2">ポケモン情報</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th>名前</th>
            <td>{{name}}</td>
          </tr>
          <tr>
            <th>ID</th>
            <td>{{id}}</td>
          </tr>
          <tr>
            <th>高さ</th>
            <td>{{height}}</td>
          </tr>
          <tr>
            <th>重さ</th>
            <td>{{weight}}</td>
          </tr>

          <tr>
            <th>タイプ</th>
            <td>
              {{#types}}{{type.name}}<br />{{/types}} {{^types}}-{{/types}}
            </td>
          </tr>

          <tr>
            <th>とくせい</th>
            <td>
              {{#abilities}}{{ability.name}}<br />{{/abilities}}
              {{^abilities}}-{{/abilities}}
            </td>
          </tr>

          <tr>
            <th>ステータス</th>
            <td>
              {{#stats}}{{stat.name}}: {{base_stat}}<br />{{/stats}}
              {{^stats}}-{{/stats}}
            </td>
          </tr>

          <tr>
            <th>アイコン</th>
            <td>
              {{#sprites.front_default}}
              <img
                src="{{sprites.front_default}}"
                alt="{{name}}"
                width="96"
                height="96"
              />
              {{/sprites.front_default}}
              {{^sprites.front_default}}-{{/sprites.front_default}}
            </td>
          </tr>
        </tbody>
      </table>
    </template>
  </body>
</html>
